<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dealing with Timezones • ARUtools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dealing with Timezones">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ARUtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ARUtools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/SubSample.html">Subsampling recordings</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Customization</h6></li>
    <li><a class="dropdown-item" href="../articles/customizing.html">Customizing `clean_metadata()`</a></li>
    <li><a class="dropdown-item" href="../articles/spatial.html">Working with spatial data</a></li>
    <li><a class="dropdown-item" href="../articles/timezones.html">Dealing with Timezones</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/arutools/ARUtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dealing with Timezones</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/arutools/ARUtools/blob/HEAD/vignettes/timezones.Rmd" class="external-link"><code>vignettes/timezones.Rmd</code></a></small>
      <div class="d-none name"><code>timezones.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://arutools.github.io/ARUtools/">ARUtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span> <span class="co"># For working with date/times</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># For manipulating data</span></span></code></pre></div>
<p>Timezones can cause a lot of confusion, but, unfortunately are
important descriptors of a moment in time.</p>
<blockquote>
<p><strong>To deal with timezones in ARUtools you only need two
things:</strong></p>
<ul>
<li>To make sure the timezones match between the recordings
(<code>meta</code>) and your site index (<code>site</code>)</li>
<li>And that you <em>know</em> what the timezones are (or at least that
they can be derived from their coordinates).</li>
</ul>
</blockquote>
<p>To explain this in more detail, let’s talk about how ARUtools treats
timezones.</p>
<p>In R, a date/time column can only have <em>one</em> timezone
specified. However, when working with sites around a timezone divide,
it’s possible that you may occasionally have recordings made in
different timezones which you would like to process together.</p>
<p>To facilitate this we use the convention of ‘local’ times marked with
“UTC”. Here we mean ‘local’ to reflect the timezone that the ARU is
recording in. This means that the <code>date_time</code> column may
contain a time recorded in Eastern Daylight savings, but the ‘official’
timezone according to R is still UTC.</p>
<p>If we were to try to use non-UTC times, we’ll be warned off.</p>
<p>To illustrate this, let’s create a cleaned sites index data frame
with the <code>date_time</code>s in the America/Toronto timezone.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va">example_sites_clean</span></span>
<span></span>
<span><span class="co"># Force to a non-UTC timezones</span></span>
<span><span class="va">s</span><span class="op">$</span><span class="va">date_time_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/force_tz.html" class="external-link">force_tz</a></span><span class="op">(</span><span class="va">s</span><span class="op">$</span><span class="va">date_time_start</span>, <span class="st">"America/Toronto"</span><span class="op">)</span></span>
<span><span class="va">s</span><span class="op">$</span><span class="va">date_time_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/force_tz.html" class="external-link">force_tz</a></span><span class="op">(</span><span class="va">s</span><span class="op">$</span><span class="va">date_time_end</span>, <span class="st">"America/Toronto"</span><span class="op">)</span></span></code></pre></div>
<p>If we try to add these sites to our cleaned metadata we can see that
the timezones are removed</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clean_metadata.html">clean_metadata</a></span><span class="op">(</span>project_files <span class="op">=</span> <span class="va">example_files</span><span class="op">)</span></span>
<span><span class="co">#&gt; Extracting ARU info...</span></span>
<span><span class="co">#&gt; Extracting Dates and Times...</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_sites.html">add_sites</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">s</span><span class="op">)</span></span>
<span><span class="co">#&gt; `date_time` columns are assumed to be in 'local' time marked with 'UTC'</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> Removing timezone specification</span></span>
<span><span class="co">#&gt; Joining by columns `date_time_start` and `date_time_end`</span></span></code></pre></div>
<div class="section level2">
<h2 id="what-timezone-are-my-data-in">What timezone are my data in?<a class="anchor" aria-label="anchor" href="#what-timezone-are-my-data-in"></a>
</h2>
<p>If we ask R what timezone these data are in, R will say “UTC”</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/tz.html" class="external-link">tz</a></span><span class="op">(</span><span class="va">m</span><span class="op">$</span><span class="va">date_time</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "UTC"</span></span></code></pre></div>
<p>But that’s probably not <em>really</em> the case.</p>
<p>There are three possible options for what the timezones might look
like:</p>
<ol style="list-style-type: decimal">
<li><p>All times are in the same timezone that was programmed into the
ARUs before they were set out. This would likely be either the timezone
of the region to which they were being deployed, or the timezone of the
lab or home base (it doesn’t really matter which, as long as they’re all
the same and you know which one it is).</p></li>
<li><p>There are several different timezones among these recordings,
which correspond to where they were deployed. This would likely happen
if ARUs were set to use GPS to get the timezone and if a study area
straddled a timezone boundary.</p></li>
<li><p>There are several different timezones among these recordings, but
they do <strong>not</strong> correspond to where they were deployed.
This might happen if the timezones were set on the ARUs for different
projects and were not corrected before deployment.</p></li>
</ol>
<p>In ARUtools, we have options to deal withe the first two scenarios.
However, if you find yourself in the third scenario, the best thing
would be to split your files by timezone and run through the workflow
individually with each batch.</p>
</div>
<div class="section level2">
<h2 id="calculating-time-to-sunrisesunset">Calculating time to sunrise/sunset<a class="anchor" aria-label="anchor" href="#calculating-time-to-sunrisesunset"></a>
</h2>
<p>For simplicity, we don’t need to worry about the ‘real’ timezone
except for when we calculate the time to sunrise/sunset.</p>
<p>This is where it’s important to know what timezone patterns you have
in your data.</p>
<p>In our first scenario, we know our our recordings all have the same
timezone and we know what that timezone is.</p>
<p>Here we can specify that timezone specifically:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_est</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m</span>, aru_tz <span class="op">=</span> <span class="st">"America/Toronto"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, in our second scenario, we know that the timezones may
be different, but importantly, that they correspond to the location
where the unit was deployed. Here we can use
<code>aru_tz = "local"</code> and <code><a href="../reference/calc_sun.html">calc_sun()</a></code> will use the
recording coordinates to figure out what the timezone was.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_local</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m</span>, aru_tz <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span></code></pre></div>
<p>Finally, in our final scenario, we know what the timezones are, but
they are not all the same and they do not correspond to the location
where the unit was deployed.</p>
<p>In this case we’ll split the data and use the specific timezones.
Let’s assume that we know the timezones and that sites P06_1 and P09_1
are in Central, and the rest in Eastern.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Split by timezone</span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">site_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P06_1"</span>, <span class="st">"P09_1"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Get P06_1 and P09_1</span></span>
<span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">m</span>, <span class="op">!</span><span class="va">site_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P06_1"</span>, <span class="st">"P09_1"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Get all except the above</span></span>
<span></span>
<span><span class="co"># Calculate time to sunrise/sunset individually</span></span>
<span><span class="va">m1_cst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m1</span>, aru_tz <span class="op">=</span> <span class="st">"America/Winnipeg"</span><span class="op">)</span></span>
<span><span class="va">m2_est</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m2</span>, aru_tz <span class="op">=</span> <span class="st">"America/Toronto"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join them back in</span></span>
<span><span class="va">m_joint</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">m1_cst</span>, <span class="va">m2_est</span><span class="op">)</span></span></code></pre></div>
<p>Because we actually use the same timezone that the sites were located
in, if you compare <code>m_joint</code> to <code>m_local</code> you’ll
see that with the exception of what the timezone is called they have the
same results (“America/Detroit” is the same timezone as
“America/Toronto”).</p>
<p>You’ll also note that those with the Eastern timezone
(America/Toronto or America/Detroit), all match those in
<code>m_est</code>.</p>
</div>
<div class="section level2">
<h2 id="important-things-to-note">Important things to note<a class="anchor" aria-label="anchor" href="#important-things-to-note"></a>
</h2>
<ul>
<li><p>The timezone of your recordings, must be the same as in your site
index, or they won’t join properly with
<code><a href="../reference/add_sites.html">add_sites()</a></code></p></li>
<li><p>Unless you know the timezones match the deployment location, you
<em>must</em> know what timezone your recordings were made in.</p></li>
<li><p>Because <code><a href="../reference/calc_sun.html">calc_sun()</a></code> returns <em>relative</em> time to
sunrise and sunset, it’s important that you know what the timezone of
the recording is in, but it’s <strong>not</strong> important that the
timezone matches that of it’s deployment area.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="an-example">An example<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h2>
<p>Let’s assume we have two sites, one in the Eastern timezone, one in
Western. However, they are both programmed to record at 4am, 5am and 6am
<em>Eastern</em>.</p>
<p>We’ll first use some of our example data to create this mini meta
data set.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_mini</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">site_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P01_1"</span>, <span class="st">"P06_1"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">aru_id</span>, <span class="va">site_id</span>, <span class="va">longitude</span>, <span class="va">latitude</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/cross_join.html" class="external-link">cross_join</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>date_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"2020-05-02 05:00:00"</span>,</span>
<span>    <span class="st">"2020-05-02 06:00:00"</span>,</span>
<span>    <span class="st">"2020-05-02 07:00:00"</span></span>
<span>  <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="va">date_time</span><span class="op">)</span>,</span>
<span>    path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">aru_id</span>, <span class="st">"_"</span>, <span class="va">site_id</span>, <span class="st">"_"</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/hour.html" class="external-link">hour</a></span><span class="op">(</span><span class="va">date_time</span><span class="op">)</span>, <span class="st">".csv"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>If we now calculate the time to sunrise/sunset (<code>t2sr</code> and
<code>t2ss</code>) we find that the difference between these sites is
about 15min, accounting for the fact that site P06_1 is farther west
than P01_1 and so the recording at 6am occurs 28.8min before sunrise,
whereas P01_1’s 6am recording occurs only 14.9 min before sunrise.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m_mini</span>, aru_tz <span class="op">=</span> <span class="st">"America/Toronto"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">date_time</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt;   aru_id   site_id longitude latitude date_time           date       path  tz   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">05:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">05:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">06:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">06:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">07:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">07:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: t2sr &lt;dbl&gt;, t2ss &lt;dbl&gt;</span></span></span></code></pre></div>
<p>However, if we were to incorrectly assume that the ARU unit located
in the central timezone was recording in that timezone, we would get
very different results.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_sun.html">calc_sun</a></span><span class="op">(</span><span class="va">m_mini</span>, aru_tz <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">date_time</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt;   aru_id   site_id longitude latitude date_time           date       path  tz   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">05:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">05:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">06:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">06:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> BARLT10… P01_1       -<span style="color: #BB0000;">85.0</span>     50.0 2020-05-02 <span style="color: #949494;">07:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> BARLT10… P06_1       -<span style="color: #BB0000;">90.1</span>     52   2020-05-02 <span style="color: #949494;">07:00:00</span> 2020-05-02 BARL… Amer…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: t2sr &lt;dbl&gt;, t2ss &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Here all the times to sunrise/sunset for site P06_1 are offset by an
hour, because we’re assuming the wrong timezone (which is an hour
different from the correct one).</p>
<p><strong>Therefore the take home is that you only need two
things:</strong></p>
<ul>
<li>To make sure the timezones match between the recordings and your
site index</li>
<li>And that you <em>know</em> what the timezones are (or at least that
they can be derived from their coordinates).</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Hope, Steffi LaZerte, Government of Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
